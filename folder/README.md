# VFS Emulator — Variant 22 (GUI, ZIP-backed, Tkinter)

> Эмулятор командной оболочки с виртуальной файловой системой в памяти. Поддерживает ZIP как источник VFS, стартовые скрипты, GUI‑REPL, базовые и дополнительные команды по варианту 22.

## Содержание
- [Возможности](#возможности)
- [Требования](#требования)
- [Быстрый старт](#быстрый-старт)
- [VFS архивы](#vfs-архивы)
- [Стартовые скрипты](#стартовые-скрипты)
- [Справка по командам](#справка-по-командам)
- [Скриншоты для отчёта](#скриншоты-для-отчёта)
- [Структура репозитория](#структура-репозитория)
- [Чек‑лист для сдачи](#чеклист-для-сдачи)
- [Известные особенности](#известные-особенности)

## Возможности
- Графический интерфейс (Tkinter) с REPL и приглашением вида `/path$`.
- Загрузка VFS **из ZIP в память** (без распаковки на диск).
- Нормализация ZIP: игнорируются `__MACOSX/` и `._*`, автоматически снимается одиночная папка‑обёртка.
- Параметры командной строки: `--vfs` (путь к ZIP), `--script` (стартовый скрипт).
- При выполнении скрипта в окне видны и ввод, и вывод (эмуляция диалога).
- Команды:
  - **ls**, **cd**
  - **uniq FILE** — удаляет подряд идущие дубликаты строк (UTF‑8)
  - **find PATH [SUBSTR]** — поиск по именам файлов/папок
  - **du [PATH]** — суммарный размер в байтах
  - **chown PATH OWNER** — смена владельца (метаданные в памяти)
  - **exit** — завершение (в скрипте не закрывает окно, а останавливает скрипт)

## Требования
- Python 3.9+
- Tkinter (обычно входит в поставку Python)

## Быстрый старт
Склонируйте репозиторий и перейдите в папку проекта:
```bash
python vfs_emulator.py --vfs vfs_sample_min.zip --script start_min.txt
python vfs_emulator.py --vfs vfs_sample_deep.zip --script start_deep.txt
```

## VFS архивы
- `vfs_sample_min.zip` — минимальная структура:
  - `hello.txt`, `notes/`, `bin/`
- `vfs_sample_deep.zip` — глубокая структура:
  - `home/`, `usr/…`, `var/log/system.log`, бинарные файлы в `site-packages/`

## Стартовые скрипты
- `start_min.txt` — демонстрирует успешные команды для **min** и ожидаемые ошибки на пути **deep**.
- `start_deep.txt` — демонстрирует успешные команды для **deep** и ожидаемые ошибки на пути **min**.

Запуск (повтор):
```bash
python vfs_emulator.py --vfs vfs_sample_min.zip --script start_min.txt
python vfs_emulator.py --vfs vfs_sample_deep.zip --script start_deep.txt
```

## Справка по командам
```text
ls [PATH]                 # список каталога; папки оканчиваются на '/'
cd PATH                   # смена директории
uniq FILE                 # удаление подряд идущих дублей строк (UTF‑8)
find PATH [SUBSTR]        # поиск по именам; SUBSTR опциональна
du [PATH]                 # размер в байтах (по умолчанию текущая директория)
chown PATH OWNER          # смена владельца узла (метаданные VFS)
exit                      # выход; в скрипте останавливает сценарий, GUI остаётся открытым
```

## Скриншоты для отчёта
Рекомендуется приложить два набора скринов GUI:
1. **MIN + start_min.txt** — `ls`, `uniq /hello.txt`, `cd /notes`, `chown /notes/todo.txt alice`, ошибка на `/var/log/system.log`, `du /`.
2. **DEEP + start_deep.txt** — `ls` с `home/ usr/ var/`, `find / usr`, `uniq /var/log/system.log`, ошибки на `/notes` и `/hello.txt`, `du /`.

## Структура репозитория
```
folder/
  vfs_emulator.py
  vfs_sample_min.zip
  vfs_sample_deep.zip
  start_min.txt
  start_deep.txt
  README.md
```
> Временные/служебные файлы (`run_*.py`, `.DS_Store`, `__pycache__/`) — удалить или добавить в `.gitignore`.

## Чеклист для сдачи
- [x] GUI‑REPL, заголовок с именем VFS; парсер аргументов (shlex); ошибки команд.  
- [x] Поддержка `--vfs` и `--script`; запуск скрипта с эхо‑вводом и выводом, обработка ошибок.  
- [x] VFS из ZIP в памяти; обработка ошибок загрузки; нормализация корня ZIP.  
- [x] Команды `ls`, `cd`, `uniq`, `find`, `du`, `chown`, `exit`.  
- [x] Два стартовых скрипта + ZIP‑архивы для демонстрации.  
- [x] Скриншоты обоих запусков.  
- [x] README.md с инструкциями.

## Известные особенности
- `uniq` ожидает текст UTF‑8; для бинарных файлов будет ошибка
- `find` ищет по именам, а не по содержимому
- `du` считает размер по сумме байтов содержимого файлов без оверхедов

---

Основано на задании «Вариант №22» из методички по дисциплине «Конфигурационное управление».

